<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Control de Finanzas Personal</title>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    
    <style>
        /* ... (mismo CSS que antes) ... */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .container { max-width: 1000px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        h1 { text-align: center; color: #333; margin-bottom: 20px; }
        .seccion { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        input, select, button { padding: 10px; margin: 5px; border: 1px solid #ccc; border-radius: 3px; }
        button { background: #007cba; color: white; cursor: pointer; border: none; }
        button:hover { background: #005a87; }
        .btn-success { background: #27ae60; }
        .btn-warning { background: #f39c12; }
        .btn-danger { background: #e74c3c; }
        .btn-google { background: #4285f4; color: white; }
        .item { display: flex; justify-content: space-between; padding: 8px; border-bottom: 1px solid #eee; align-items: center; }
        .eliminar { background: #e74c3c; padding: 5px 10px; }
        .eliminar:hover { background: #c0392b; }
        .resumen { background: #ecf0f1; padding: 15px; border-radius: 5px; margin: 20px 0; }
        .total { font-weight: bold; font-size: 18px; color: #27ae60; }
        .auth-section { text-align: center; padding: 30px; }
        .status { padding: 10px; border-radius: 5px; margin: 10px 0; }
        .status-success { background: #d4edda; color: #155724; }
        .status-error { background: #f8d7da; color: #721c24; }
        .tabs { display: flex; margin-bottom: 20px; flex-wrap: wrap; }
        .tab { padding: 10px 20px; background: #eee; cursor: pointer; border: 1px solid #ddd; margin: 2px; }
        .tab.activo { background: #007cba; color: white; }
        .tab-content { display: none; }
        .tab-content.activo { display: block; }
        .cloud-status { 
            position: fixed; 
            top: 10px; 
            right: 10px; 
            padding: 10px; 
            border-radius: 5px; 
            color: white; 
            font-size: 12px;
            z-index: 1000;
        }
        .cloud-connected { background: #27ae60; }
        .cloud-disconnected { background: #e74c3c; }
        .cloud-syncing { background: #3498db; }
        .alerta { background: #fff3cd; border: 1px solid #ffeaa7; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .alerta-pendiente { background: #f8d7da; border: 1px solid #f5c6cb; }
        .recordatorio { background: #d1ecf1; border: 1px solid #bee5eb; }
        .badge { background: #e74c3c; color: white; padding: 2px 8px; border-radius: 10px; font-size: 12px; }
        .setup-message { 
            background: #e8f4f8; 
            padding: 20px; 
            border-radius: 10px; 
            margin: 20px 0; 
            text-align: center;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <!-- Cloud Status Indicator -->
    <div id="cloud-status" class="cloud-status cloud-disconnected">
        ‚òÅÔ∏è Desconectado
    </div>

    <div class="container">
        <h1>üí∞ Control de Finanzas Personal</h1>
        
        <!-- Setup Message -->
        <div class="setup-message">
            <h3>üîß Configuraci√≥n Requerida</h3>
            <p>Esta aplicaci√≥n necesita credenciales de Firebase para funcionar.</p>
            <p><strong>Para administradores:</strong> Las credenciales deben configurarse en el c√≥digo fuente.</p>
        </div>

        <!-- Authentication Section -->
        <div id="auth-section" class="auth-section">
            <div id="login-ui">
                <h3>üîê Iniciar Sesi√≥n con Google</h3>
                <button onclick="iniciarSesionGoogle()" class="btn-google" disabled>
                    Iniciar con Google (Configurar primero)
                </button>
                <p><small>‚úÖ Tus datos se guardar√°n autom√°ticamente en la nube</small></p>
            </div>
            <div id="user-info" style="display: none;">
                <p>Bienvenido, <span id="user-name"></span>!</p>
                <button onclick="cerrarSesion()" class="btn-danger">Cerrar Sesi√≥n</button>
            </div>
        </div>

        <!-- Resto del HTML igual... -->

        <script>
            // ‚úÖ CONFIGURACI√ìN DE FIREBASE (Espacio para credenciales)
            const firebaseConfig = {
            apiKey: "AIzaSyDdDVbgk0_4jy710M20JS2NW3Dzj4GgnlA",
            authDomain: "finanzas-carlos-1016a.firebaseapp.com",
            databaseURL: "https://finanzas-carlos-1016a-default-rtdb.firebaseio.com",
            projectId: "finanzas-carlos-1016a",
            storageBucket: "finanzas-carlos-1016a.firebasestorage.app",
            messagingSenderId: "801600970542",
            appId: "1:801600970542:web:fa8d96c5c237a27051a4bf"
        };

            // Verificar si hay credenciales v√°lidas
            let firebaseIniciado = false;
            try {
                if (firebaseConfig.apiKey && firebaseConfig.apiKey.length > 10) {
                    firebase.initializeApp(firebaseConfig);
                    const database = firebase.database();
                    const auth = firebase.auth();
                    firebaseIniciado = true;
                    
                    // Habilitar bot√≥n de login
                    document.querySelector('.btn-google').disabled = false;
                    document.querySelector('.btn-google').textContent = 'Iniciar con Google';
                }
            } catch (error) {
                console.log('Firebase no configurado');
            }

            // Resto del c√≥digo JavaScript...
            // (El mismo c√≥digo que ten√≠as, pero con verificaciones de seguridad)

            // Datos iniciales
            const datosIniciales = {
                obligaciones: [],
                ingresos: [],
                gastos: [],
                ahorrosManuales: [],
                configuracion: {
                    porcentajeAhorro: 10
                },
                pagosRealizados: {}
            };

            let datosUsuario = JSON.parse(JSON.stringify(datosIniciales));
            let currentUser = null;

            // Funciones principales (con verificaciones de seguridad)
            function iniciarSesionGoogle() {
                if (!firebaseIniciado) {
                    alert('‚ùå Esta aplicaci√≥n necesita configuraci√≥n. Contacta al administrador.');
                    return;
                }
                
                const provider = new firebase.auth.GoogleAuthProvider();
                auth.signInWithPopup(provider)
                    .then((result) => {
                        currentUser = result.user;
                        mostrarApp();
                        actualizarEstadoCloud('connected');
                        cargarDatosCloud();
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                        alert('Error: ' + error.message);
                    });
            }

            function cerrarSesion() {
                if (firebaseIniciado && auth) {
                    auth.signOut().then(() => {
                        currentUser = null;
                        mostrarLogin();
                        actualizarEstadoCloud('disconnected');
                    });
                }
            }

            // Resto de funciones igual...
        </script>
    </div>
</body>
</html>
